<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h1>
    <div >
        <a href="/products" class="btn btn-outline-primary mr-2" role="link">Thêm hàng hóa</a>
    </div>
</h1>
<form method="post" action="/products/productNew" id="addProductForm" enctype="multipart/form-data" >
    <div class="card" id="newProductCard">
        <div class="card-body">
            <div class="row d-flex align-items-center">
                <div class="col-3">
                    <h5><b>Mã hàng hóa</b></h5>
                </div>
                <div class="col-3 float-left">
                    <div class="input-group mb-3">

                        <input type="text" class="form-control" aria-label="Default" name="MaMatHang" readonly value="{{displayKey}}"
                               aria-describedby="inputGroup-sizing-default">
                    </div>
                </div>
            </div>
            <div class="dropdown-divider"></div>

            <h5 class="font-weight-bold mt-4 mb-4" >Thông tin cơ bản</h5>


            <div class="row d-flex  mb-2">
                <label class="col-3 ">Tên mặt hàng</label>
                <input class="col-8 " name="TenMatHang" type="text" placeholder="Nhập tên hàng hóa"/>
            </div>
            <div class="row d-flex mb-2">
                <label class="col-3 ">Xuất xứ</label>
                <input class="col-8" name="XuatXu" type="text" placeholder="Nhập xuất xứ"/>
            </div>
            <div class="row d-flex mb-2">
                <label class="col-3 ">Đơn vị tính</label>
                <input class="col-8 " name="DonViTinh" type="text" placeholder="Nhập đơn vị tính"/>
            </div>
            <div class="row d-flex mb-2">
                <label class="col-3">Đơn giá</label>
                <input class="col-8" type="number" name="DonGia" min="0"/>
            </div>
            <div class="row d-flex mb-2">
                <label class="col-3">Loại</label>
                <input class="col-8" type="text" name="Loai" placeholder="Nhập loại hàng hóa"/>
            </div>
            <div class="dropdown-divider"></div>
            <h5 class="font-weight-bold mt-4 mb-4" >Tình trạng kho</h5>
            <div class="row d-flex mb-2">
                <label class="col-3 ">Số lượng</label>
                <input class="col-8 " type="number" min="0" name="SoLuong" placeholder="Nhập số lượng"/>
            </div>
            <div class="row d-flex inline">
                <label class="col-3 border-0">Tình trạng</label>
                <div class="col-8">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="TinhTrang" id="flexRadioDefault1">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Còn hàng
                        </label>

                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="TinhTrang" id="flexRadioDefault1">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Hết hàng
                        </label>

                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="TinhTrang" id="flexRadioDefault1">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Ngừng kinh doanh
                        </label>
                    </div>
                </div>

            </div>
            <div class="dropdown-divider"></div>
            <h5 class="font-weight-bold mt-4 mb-4" >Hình ảnh</h5>
            <div class="row d-flex mb-2">
                <label class="col-3 ">Đường dẫn hình</label>
                <input class="col-8 " type="file" multiple name="image"  id="imgInp" placeholder="Nhập link hình ảnh"/>


            </div>
            <div class="row mb-7">
                <div class="col-3"></div>
                <div class="col-8 d-flex flex-wrap float-left" id="preview_image"  style="height:150px; max-width:content-box">


                </div>
            </div>
        </div>

    </div>
    <div class="text-right mt-5">
        <a href="/products" class="btn btn-outline-danger" id="cancelAddProduct" role="button">
            Hủy </a>
        </a>
        <button class="btn btn-success ml-2" id="addBill" type="submit" form="addProductForm">
            Lưu </button>


    </div>
</form>

<script>


    function readURL(input) {
        $('#preview_image').empty();

        if (input.files && input.files[0]) {
            let i=0;

            for (i=0;i<input.files.length;i++) {
                $('#preview_image').append('<img class="ml-2 mb-2" id="preview'+i+ '" src="#" ' + 'style="max-width:100%;max-height:100%" />');

                var reader = new FileReader();
                let id="#preview"+i;
                reader.onload = function (e) {

                    $(id).attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[i]); // convert to base64 string
            }
        }
    }

    $("#imgInp").change(function() {
        readURL(this);
    });

</script>


